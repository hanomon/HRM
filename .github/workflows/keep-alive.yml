name: Keep Render Server Alive

on:
  schedule:
    # ë§¤ 5ë¶„ë§ˆë‹¤ ì‹¤í–‰ (UTC ê¸°ì¤€)
    # Render ë¬´ë£Œ í‹°ì–´ëŠ” 15ë¶„ ë¹„í™œì„± ì‹œ Sleep ëª¨ë“œë¡œ ì „í™˜ë˜ë¯€ë¡œ
    # 5ë¶„ ê°„ê²©ìœ¼ë¡œ Health Checkë¥¼ ìˆ˜í–‰í•˜ì—¬ ì„œë²„ë¥¼ ê¹¨ì–´ìˆê²Œ ìœ ì§€
    - cron: '*/5 * * * *'
  
  # ìˆ˜ë™ìœ¼ë¡œë„ ì‹¤í–‰ ê°€ëŠ¥
  workflow_dispatch:

jobs:
  ping-backend:
    name: Ping Backend Health Endpoint
    runs-on: ubuntu-latest
    
    steps:
      - name: Ping Backend Health Check
        run: |
          echo "ğŸ“ Pinging backend health endpoint..."
          
          # Backend Health Check
          response=$(curl -s -o /dev/null -w "%{http_code}" https://hrm-backend-1dk5.onrender.com/api/health)
          
          if [ $response -eq 200 ]; then
            echo "âœ… Backend is alive! (HTTP $response)"
          else
            echo "âš ï¸  Backend returned HTTP $response (may be waking up)"
          fi
          
          echo "ğŸ‰ Keep-alive ping completed at $(date)"
      
      - name: Ping Frontend (Optional)
        run: |
          echo "ğŸ“ Pinging frontend..."
          
          # Frontend ì²´í¬ (ì„ íƒì‚¬í•­)
          response=$(curl -s -o /dev/null -w "%{http_code}" https://hrm-frontend-3tph.onrender.com)
          
          if [ $response -eq 200 ]; then
            echo "âœ… Frontend is alive! (HTTP $response)"
          else
            echo "âš ï¸  Frontend returned HTTP $response"
          fi


